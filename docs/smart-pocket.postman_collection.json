{
  "info": {
    "name": "Smart Pocket Server API",
    "description": "API for Smart Pocket personal finance management system.\nHomeserver deployment model - each instance serves one user.\n",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_postman_id": "smart-pocket-api-v1"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{bearerToken}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3001/api/v1",
      "type": "string"
    },
    {
      "key": "apiKey",
      "value": "dev_api_key_change_me",
      "type": "string"
    },
    {
      "key": "bearerToken",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Authentication",
      "description": "Authentication endpoints",
      "item": [
        {
          "name": "Connect and get bearer token",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/connect",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "connect"
              ]
            },
            "description": "Exchange API key for bearer token (JWT).\nFirst stage of two-stage authentication.\n",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"deviceInfo\": {\n    \"platform\": \"iOS\",\n    \"appVersion\": \"1.0.0\",\n    \"deviceId\": \"unique-device-id\"\n  }\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          }
        },
        {
          "name": "Disconnect session",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/disconnect",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "disconnect"
              ]
            },
            "description": "Invalidate bearer token and end session.\nUser must reconnect with API key to get new token.\n"
          }
        }
      ]
    },
    {
      "name": "Health",
      "description": "Health endpoints",
      "item": [
        {
          "name": "Health check",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/health",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "health"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "OCR",
      "description": "OCR endpoints",
      "item": [
        {
          "name": "Parse OCR text into structured transaction data",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/ocr/parse",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "ocr",
                "parse"
              ]
            },
            "description": "Uses OpenAI to extract transaction details from OCR text",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"ocrText\": \"string\",\n  \"remarks\": \"string\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          }
        }
      ]
    },
    {
      "name": "Transactions",
      "description": "Transactions endpoints",
      "item": [
        {
          "name": "List transactions",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/transactions",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "transactions"
              ],
              "query": [
                {
                  "key": "limit",
                  "value": 50,
                  "disabled": true
                },
                {
                  "key": "offset",
                  "value": "",
                  "disabled": true
                },
                {
                  "key": "startDate",
                  "value": "",
                  "disabled": true
                },
                {
                  "key": "endDate",
                  "value": "",
                  "disabled": true
                },
                {
                  "key": "payeeId",
                  "value": "",
                  "disabled": true
                }
              ]
            }
          }
        },
        {
          "name": "Create transaction",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/transactions",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "transactions"
              ]
            },
            "description": "Creates transaction, stores in PostgreSQL, and syncs to Actual Budget",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"date\": \"string\",\n  \"payeeId\": \"string\",\n  \"accountId\": \"string\",\n  \"currency\": \"USD\",\n  \"items\": [\n    {\n      \"codeName\": \"string\",\n      \"readableName\": \"string\",\n      \"price\": null,\n      \"quantity\": null,\n      \"currency\": \"string\"\n    }\n  ],\n  \"ocrMetadata\": {\n    \"rawText\": \"string\",\n    \"remarks\": \"string\",\n    \"confidence\": null\n  }\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          }
        },
        {
          "name": "Get transaction by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/transactions/:id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "transactions",
                ":id"
              ],
              "variable": [
                {
                  "key": "id",
                  "value": "sample-id",
                  "description": "Path parameter: id"
                }
              ]
            }
          }
        },
        {
          "name": "Update transaction",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/transactions/:id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "transactions",
                ":id"
              ],
              "variable": [
                {
                  "key": "id",
                  "value": "sample-id",
                  "description": "Path parameter: id"
                }
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"date\": \"string\",\n  \"payeeId\": \"string\",\n  \"accountId\": \"string\",\n  \"currency\": \"USD\",\n  \"items\": [\n    {\n      \"codeName\": \"string\",\n      \"readableName\": \"string\",\n      \"price\": null,\n      \"quantity\": null,\n      \"currency\": \"string\"\n    }\n  ],\n  \"ocrMetadata\": {\n    \"rawText\": \"string\",\n    \"remarks\": \"string\",\n    \"confidence\": null\n  }\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          }
        },
        {
          "name": "Delete transaction",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/transactions/:id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "transactions",
                ":id"
              ],
              "variable": [
                {
                  "key": "id",
                  "value": "sample-id",
                  "description": "Path parameter: id"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Payees",
      "description": "Payees endpoints",
      "item": [
        {
          "name": "List all payees",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/payees",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "payees"
              ],
              "query": [
                {
                  "key": "search",
                  "value": "",
                  "description": "Search payee names",
                  "disabled": true
                }
              ]
            }
          }
        },
        {
          "name": "Create new payee",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/payees",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "payees"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"string\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          }
        }
      ]
    },
    {
      "name": "Accounts",
      "description": "Accounts endpoints",
      "item": [
        {
          "name": "List all accounts",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/accounts",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "accounts"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Products",
      "description": "Products endpoints",
      "item": [
        {
          "name": "Get product suggestions",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/products/search",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "products",
                "search"
              ],
              "query": [
                {
                  "key": "query",
                  "value": "",
                  "description": "Partial code name or readable name",
                  "disabled": false
                },
                {
                  "key": "payeeId",
                  "value": "",
                  "description": "Filter by payee/merchant context",
                  "disabled": true
                },
                {
                  "key": "limit",
                  "value": 10,
                  "disabled": true
                }
              ]
            },
            "description": "Auto-suggest products based on partial code/name and historical usage"
          }
        }
      ]
    },
    {
      "name": "Google Sheets",
      "description": "Google Sheets endpoints",
      "item": [
        {
          "name": "Create sync draft",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/google-sheets/sync/draft",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "google-sheets",
                "sync",
                "draft"
              ]
            },
            "description": "Get pending account balance changes that need to be synced to Google Sheets.\nCreates a draft with the changes that can be reviewed before syncing.\nPersonal feature - only available if GOOGLE_SHEETS_ENABLED=true on server.\n"
          }
        },
        {
          "name": "Execute sync",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/google-sheets/sync/approve/:draftId",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "google-sheets",
                "sync",
                "approve",
                ":draftId"
              ],
              "variable": [
                {
                  "key": "draftId",
                  "value": "sample-draftId",
                  "description": "Path parameter: draftId"
                }
              ]
            },
            "description": "Execute the Google Sheets sync using a previously created draft.\nUpdates the Google Sheets with current account balances from Actual Budget.\nPersonal feature - only available if GOOGLE_SHEETS_ENABLED=true on server.\n"
          }
        }
      ]
    }
  ]
}